<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <title>Extension Tests</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="https://assumeforsimplicity.com/feed.xml" title="Assume For Simplicity" />
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Extension Tests | Assume For Simplicity</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Extension Tests" />
<meta name="author" content="jr101dallas" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Refactor Fun Now that I have extension methods, I should have some tests on them. I’m only planning on testing the basics for now. EntityExtensions basically all depend on the HasComponent, so I’ll test that it provides positive and negative results and that’s pretty decent coverage. I could add some more to check things like positive results when there are multiple components, or negative when there aren’t any components, but the logic is simple enough there isn’t much point." />
<meta property="og:description" content="Refactor Fun Now that I have extension methods, I should have some tests on them. I’m only planning on testing the basics for now. EntityExtensions basically all depend on the HasComponent, so I’ll test that it provides positive and negative results and that’s pretty decent coverage. I could add some more to check things like positive results when there are multiple components, or negative when there aren’t any components, but the logic is simple enough there isn’t much point." />
<link rel="canonical" href="https://assumeforsimplicity.com/roguelike/2021/11/19/extension-tests.html" />
<meta property="og:url" content="https://assumeforsimplicity.com/roguelike/2021/11/19/extension-tests.html" />
<meta property="og:site_name" content="Assume For Simplicity" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-11-19T09:11:34+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Extension Tests" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"jr101dallas"},"description":"Refactor Fun Now that I have extension methods, I should have some tests on them. I’m only planning on testing the basics for now. EntityExtensions basically all depend on the HasComponent, so I’ll test that it provides positive and negative results and that’s pretty decent coverage. I could add some more to check things like positive results when there are multiple components, or negative when there aren’t any components, but the logic is simple enough there isn’t much point.","url":"https://assumeforsimplicity.com/roguelike/2021/11/19/extension-tests.html","@type":"BlogPosting","headline":"Extension Tests","dateModified":"2021-11-19T09:11:34+00:00","datePublished":"2021-11-19T09:11:34+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://assumeforsimplicity.com/roguelike/2021/11/19/extension-tests.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <div id="container">
      <div class="inner">
        <nav>
    
      <a href="/" >
        Home
      </a>
    
      <a href="/posts/" >
        Posts
      </a>
    
      <a href="/breadcrumbs/" >
        Breadcrumbs
      </a>
    
      <a href="/roguelike-tutorial/" >
        Roguelike
      </a>
    
      <a href="/about/" >
        About
      </a>
    
  </nav>
        <header>
          <h1>Extension Tests</h1>
          <h2>Manage Time, Software, and Business, Easily  </h2>
        </header>
        <section id="downloads" class="clearfix">
          
	
        </section>
        <hr>
        <section id="main_content">
          <p class="view">19 November 2021 by jr101dallas</p>
<a href="/posts/">&#8672;&nbsp;Back to Posts</a>


<h1 id="refactor-fun">Refactor Fun</h1>
<p>Now that I have extension methods, I should have some tests on them. I’m only planning on testing the basics for now. EntityExtensions basically all depend on the HasComponent, so I’ll test that it provides positive and negative results and that’s pretty decent coverage. I could add some more to check things like positive results when there are multiple components, or negative when there aren’t any components, but the logic is simple enough there isn’t much point.</p>

<h2 id="entityextensionstests">EntityExtensionsTests</h2>
<p>Here are the tests on EntityExtensions.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">[</span><span class="n">TestMethod</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">HasComponentTrueWhenExists</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">entity</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Entity</span><span class="p">();</span>
            <span class="n">entity</span><span class="p">.</span><span class="n">components</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">ComponentType</span><span class="p">.</span><span class="n">Inventory</span><span class="p">,</span> <span class="k">new</span> <span class="nf">Inventory</span><span class="p">());</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">IsTrue</span><span class="p">(</span><span class="n">entity</span><span class="p">.</span><span class="nf">HasComponent</span><span class="p">(</span><span class="n">ComponentType</span><span class="p">.</span><span class="n">Inventory</span><span class="p">,</span> <span class="k">out</span> <span class="n">_</span><span class="p">));</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">TestMethod</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">HasComponentFalseWhenAbsent</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">entity</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Entity</span><span class="p">();</span>
            <span class="n">entity</span><span class="p">.</span><span class="n">components</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">ComponentType</span><span class="p">.</span><span class="n">Inventory</span><span class="p">,</span> <span class="k">new</span> <span class="nf">Inventory</span><span class="p">());</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">IsFalse</span><span class="p">(</span><span class="n">entity</span><span class="p">.</span><span class="nf">HasComponent</span><span class="p">(</span><span class="n">ComponentType</span><span class="p">.</span><span class="n">Component</span><span class="p">,</span> <span class="k">out</span> <span class="n">_</span><span class="p">));</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>Short and simple.</p>

<h2 id="offenseextensionstests">OffenseExtensionsTests</h2>
<p>Likewise, here are the OffenseExtensionsTests.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">[</span><span class="n">TestMethod</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">ToOffenseModsReturnsOffenseMods</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">off</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Offense</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">offMods</span> <span class="p">=</span> <span class="n">off</span><span class="p">.</span><span class="nf">ToOffenseMods</span><span class="p">();</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="n">OffenseMods</span><span class="p">),</span> <span class="n">offMods</span><span class="p">.</span><span class="nf">GetType</span><span class="p">());</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">TestMethod</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">ToOffenseModsKeepsValues</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">off</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Offense</span><span class="p">(</span><span class="m">9</span><span class="p">,</span> <span class="m">11</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">offMods</span> <span class="p">=</span> <span class="n">off</span><span class="p">.</span><span class="nf">ToOffenseMods</span><span class="p">();</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="n">off</span><span class="p">.</span><span class="n">BaseAim</span><span class="p">,</span> <span class="n">offMods</span><span class="p">.</span><span class="n">totalAim</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="n">off</span><span class="p">.</span><span class="n">BaseDamage</span><span class="p">,</span> <span class="n">offMods</span><span class="p">.</span><span class="n">totalDamage</span><span class="p">);</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>I’m a little on the fence about multiple asserts in a single test. If they’re all really extremely simple, I figure they’re not so bad. But, I’ve had some really nasty complex tests with multiple non-trivial asserts in them where the failure wasn’t immediately obvious despite the line numbers and failure text. The worst is when the test names are what show in the pipeline logging but then the multiple asserts are actually testing wildly different logic.</p>

<h2 id="offensemodsextensionstests">OffenseModsExtensionsTests</h2>
<p>I’ll come back to these, but for the moment I’ve got to get some sleep.</p>



  <small>tags: <em>code</em> - <em>extension</em> - <em>tests</em></small>


<p>
  <div class="post-nav">
    <p>
      
      <a href="/roguelike/2021/11/18/intermediate-refactor.html">&#8672;&nbsp;Intermediate Refactor</a>
      
    </p>
    <p>
      
      <a href="/roguelike/2021/11/20/offense-mods-tests.html">Offense Mods Tests&nbsp;&#8674;</a>
      
    </p>
  </div>
</p>
        </section>

        <footer>
        
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

      </div>
    </div>

    
  </body>
</html>