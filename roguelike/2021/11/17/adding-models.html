<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <title>Adding Models</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="https://assumeforsimplicity.com/feed.xml" title="Assume For Simplicity" />
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Adding Models | Assume For Simplicity</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Adding Models" />
<meta name="author" content="jr101dallas" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Replacing Tuple I had a little break, and when I came back the thing on the top of my mind was how I was not happy with the tuple situation. I wasn’t all the way ready to add a Models namespace yet but it seems like now I’m going to." />
<meta property="og:description" content="Replacing Tuple I had a little break, and when I came back the thing on the top of my mind was how I was not happy with the tuple situation. I wasn’t all the way ready to add a Models namespace yet but it seems like now I’m going to." />
<link rel="canonical" href="https://assumeforsimplicity.com/roguelike/2021/11/17/adding-models.html" />
<meta property="og:url" content="https://assumeforsimplicity.com/roguelike/2021/11/17/adding-models.html" />
<meta property="og:site_name" content="Assume For Simplicity" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-11-17T09:11:34+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Adding Models" />
<script type="application/ld+json">
{"description":"Replacing Tuple I had a little break, and when I came back the thing on the top of my mind was how I was not happy with the tuple situation. I wasn’t all the way ready to add a Models namespace yet but it seems like now I’m going to.","headline":"Adding Models","dateModified":"2021-11-17T09:11:34+00:00","datePublished":"2021-11-17T09:11:34+00:00","url":"https://assumeforsimplicity.com/roguelike/2021/11/17/adding-models.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://assumeforsimplicity.com/roguelike/2021/11/17/adding-models.html"},"author":{"@type":"Person","name":"jr101dallas"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <div id="container">
      <div class="inner">
        <nav>
    
      <a href="/" >
        Home
      </a>
    
      <a href="/posts/" >
        Posts
      </a>
    
      <a href="/breadcrumbs/" >
        Breadcrumbs
      </a>
    
      <a href="/roguelike-tutorial/" >
        Roguelike
      </a>
    
      <a href="/about/" >
        About
      </a>
    
  </nav>
        <header>
          <h1>Adding Models</h1>
          <h2>Manage Time, Software, and Business, Easily  </h2>
        </header>
        <section id="downloads" class="clearfix">
          
	
        </section>
        <hr>
        <section id="main_content">
          <p class="view">17 November 2021 by jr101dallas</p>
<a href="/posts/">&#8672;&nbsp;Back to Posts</a>


<h1 id="replacing-tuple">Replacing Tuple</h1>
<p>I had a little break, and when I came back the thing on the top of my mind was how I was not happy with the tuple situation. I wasn’t all the way ready to add a Models namespace yet but it seems like now I’m going to.</p>

<h2 id="models">Models</h2>
<p>Just going to be some bags of values in here, but sometimes that’s what you need. I’m starting off with OffenseMods in this case because the IOffenseMods primary method is GetOffenseModifiers (maybe soon to be shortened) and that’s what is going to get returned. So here’s the start of that code plus the resulting change to Weapon.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">namespace</span> <span class="nn">Physics.Models</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">OffenseMods</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">totalAim</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">totalDamage</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

    <span class="k">public</span> <span class="k">interface</span> <span class="nc">IOffenseMods</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">OffenseMods</span> <span class="nf">GetOffenseModifiers</span><span class="p">();</span>
    <span class="p">}</span>

        <span class="k">public</span> <span class="n">OffenseMods</span> <span class="nf">GetOffenseModifiers</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">OffenseMods</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="n">totalAim</span> <span class="p">=</span> <span class="n">BonusAim</span><span class="p">,</span>
                <span class="n">totalDamage</span> <span class="p">=</span> <span class="n">BonusDamage</span>
            <span class="p">};</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>That makes the following changes happen in Target, and now I’m reminded how much I need to refactor some more in Target to simplify in there.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">public</span> <span class="k">void</span> <span class="nf">TargetEntity</span><span class="p">(</span><span class="n">Entity</span> <span class="n">originEntity</span><span class="p">,</span> <span class="n">Entity</span> <span class="n">targetEntity</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(!</span><span class="nf">HasDefense</span><span class="p">(</span><span class="n">targetEntity</span><span class="p">,</span> <span class="k">out</span> <span class="kt">var</span> <span class="n">defenseComponent</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(!</span><span class="nf">HasOffense</span><span class="p">(</span><span class="n">originEntity</span><span class="p">,</span> <span class="k">out</span> <span class="kt">var</span> <span class="n">offenseComponent</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>

            <span class="n">OffenseMods</span> <span class="n">offenseMods</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OffenseMods</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="nf">HasInventory</span><span class="p">(</span><span class="n">originEntity</span><span class="p">,</span> <span class="k">out</span> <span class="kt">var</span> <span class="n">inventoryComponent</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="n">offenseMods</span> <span class="p">=</span> <span class="nf">GetItemModifiers</span><span class="p">(</span><span class="n">inventoryComponent</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="kt">var</span> <span class="n">aimModifier</span> <span class="p">=</span> <span class="n">offenseComponent</span><span class="p">.</span><span class="n">BaseAim</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">num</span> <span class="p">=</span> <span class="n">_rand</span><span class="p">.</span><span class="nf">Next</span><span class="p">(</span><span class="m">100</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">num</span> <span class="p">+</span> <span class="n">aimModifier</span> <span class="p">+</span> <span class="n">offenseMods</span><span class="p">.</span><span class="n">totalAim</span> <span class="p">&gt;</span> <span class="m">50</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="kt">var</span> <span class="n">removeEntityId</span> <span class="p">=</span> <span class="n">targetEntity</span><span class="p">.</span><span class="n">Id</span><span class="p">;</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">$"Entity </span><span class="p">{</span><span class="n">removeEntityId</span><span class="p">.</span><span class="nf">ToString</span><span class="p">()}</span><span class="s"> has been removed from play!"</span><span class="p">);</span>

                <span class="n">defenseComponent</span><span class="p">.</span><span class="n">CurrentHealth</span> <span class="p">-=</span> <span class="n">offenseComponent</span><span class="p">.</span><span class="n">BaseDamage</span> <span class="p">+</span> <span class="n">offenseMods</span><span class="p">.</span><span class="n">totalDamage</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">defenseComponent</span><span class="p">.</span><span class="n">CurrentHealth</span> <span class="p">&lt;=</span> <span class="m">0</span><span class="p">)</span>
                    <span class="n">_unv</span><span class="p">.</span><span class="n">entities</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="n">removeEntityId</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">Universe</span> <span class="nf">GetUniverse</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">_unv</span><span class="p">;</span>

        <span class="k">public</span> <span class="n">OffenseMods</span> <span class="nf">GetItemModifiers</span><span class="p">(</span><span class="n">Inventory</span> <span class="n">inventoryComponent</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">OffenseMods</span> <span class="n">offenseMods</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OffenseMods</span><span class="p">();</span>

            <span class="k">foreach</span><span class="p">(</span><span class="n">IItem</span> <span class="n">item</span> <span class="k">in</span> <span class="n">inventoryComponent</span><span class="p">.</span><span class="n">items</span><span class="p">.</span><span class="n">Values</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">item</span> <span class="k">is</span> <span class="n">IOffenseMods</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="kt">var</span> <span class="n">modItem</span> <span class="p">=</span> <span class="p">(</span><span class="n">IOffenseMods</span><span class="p">)</span><span class="n">item</span><span class="p">;</span>
                    <span class="kt">var</span> <span class="n">mods</span> <span class="p">=</span> <span class="n">modItem</span><span class="p">.</span><span class="nf">GetOffenseModifiers</span><span class="p">();</span>
                    <span class="n">offenseMods</span><span class="p">.</span><span class="n">totalAim</span> <span class="p">+=</span> <span class="n">mods</span><span class="p">.</span><span class="n">totalAim</span><span class="p">;</span>
                    <span class="n">offenseMods</span><span class="p">.</span><span class="n">totalDamage</span> <span class="p">+=</span> <span class="n">mods</span><span class="p">.</span><span class="n">totalDamage</span><span class="p">;</span>                    
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="n">offenseMods</span><span class="p">;</span>
        <span class="p">}</span>
</code></pre></div></div>

<h2 id="and-tests">And Tests</h2>
<p>The tests really only needed some name changes since I renamed the int values in the OffenseMods but not really any other changes there.</p>




  <small>tags: <em>code</em> - <em>models</em> - <em>offense</em></small>


<p>
  <div class="post-nav">
    <p>
      
      <a href="/roguelike/2021/11/16/item-bonus.html">&#8672;&nbsp;Item Damage Bonus</a>
      
    </p>
    <p>
      
      <a href="/roguelike/2021/11/18/intermediate-refactor.html">Intermediate Refactor&nbsp;&#8674;</a>
      
    </p>
  </div>
</p>
        </section>

        <footer>
        
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

      </div>
    </div>

    
  </body>
</html>