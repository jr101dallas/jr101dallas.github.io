<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <title>Random Value</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="/assets/css/style.css?v=2caa0aad044a3b83b4d652639794266fe94766b9">
    <link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="https://assumeforsimplicity.com/feed.xml" title="Assume For Simplicity" />
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Random Value | Assume For Simplicity</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Random Value" />
<meta name="author" content="jr101dallas" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Bolt On Adding the random value in OffenseMods looks pretty straightforward. The behavior of sticky and not changing is probably best achieved by just making the value readonly and it looks like just creating an instance in Target and calling add on it instead of the other instances should work out fine." />
<meta property="og:description" content="Bolt On Adding the random value in OffenseMods looks pretty straightforward. The behavior of sticky and not changing is probably best achieved by just making the value readonly and it looks like just creating an instance in Target and calling add on it instead of the other instances should work out fine." />
<link rel="canonical" href="https://assumeforsimplicity.com/roguelike/2021/11/26/random-value.html" />
<meta property="og:url" content="https://assumeforsimplicity.com/roguelike/2021/11/26/random-value.html" />
<meta property="og:site_name" content="Assume For Simplicity" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-11-26T09:11:34+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Random Value" />
<script type="application/ld+json">
{"description":"Bolt On Adding the random value in OffenseMods looks pretty straightforward. The behavior of sticky and not changing is probably best achieved by just making the value readonly and it looks like just creating an instance in Target and calling add on it instead of the other instances should work out fine.","headline":"Random Value","dateModified":"2021-11-26T09:11:34+00:00","datePublished":"2021-11-26T09:11:34+00:00","url":"https://assumeforsimplicity.com/roguelike/2021/11/26/random-value.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://assumeforsimplicity.com/roguelike/2021/11/26/random-value.html"},"author":{"@type":"Person","name":"jr101dallas"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <div id="container">
      <div class="inner">
        <nav>
    
      <a href="/" >
        Home
      </a>
    
      <a href="/posts/" >
        Posts
      </a>
    
      <a href="/breadcrumbs/" >
        Breadcrumbs
      </a>
    
      <a href="/roguelike-tutorial/" >
        Roguelike
      </a>
    
      <a href="/about/" >
        About
      </a>
    
  </nav>
        <header>
          <h1>Random Value</h1>
          <h2>Manage Time, Software, and Business, Easily  </h2>
        </header>
        <section id="downloads" class="clearfix">
          
	
        </section>
        <hr>
        <section id="main_content">
          <p class="view">26 November 2021 by jr101dallas</p>
<a href="/posts/">&#8672;&nbsp;Back to Posts</a>


<h1 id="bolt-on">Bolt On</h1>
<p>Adding the random value in OffenseMods looks pretty straightforward. The behavior of sticky and not changing is probably best achieved by just making the value <code class="language-plaintext highlighter-rouge">readonly</code> and it looks like just creating an instance in Target and calling add on it instead of the other instances should work out fine.</p>

<h2 id="rngvalue">rngValue</h2>
<p>I was looking for a good name like luckMod or totalLuck or rngLove, but I think that I just want it named really literally and I think I’ll eventually have other values for Luck so I dont want to confuse things with that. So that means that the changes in OffenseMods look like this:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">rngValue</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">totalAim</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">totalDamage</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">OffenseMods</span><span class="p">(){}</span>
        <span class="k">public</span> <span class="nf">OffenseMods</span><span class="p">(</span><span class="kt">int</span> <span class="n">roll</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">rngValue</span> <span class="p">=</span> <span class="n">roll</span><span class="p">;</span>
        <span class="p">}</span>
</code></pre></div></div>

<h2 id="target-changes">Target Changes</h2>
<p>Technically, I don’t have to make any changes to the Add logic in the OffenseModsExtensions because I just want to do nothing with rngValue in the first place. Conveniently, rngValue being readonly will enforce that later when I forget. It does mean that I need to use the constructor for the first OffenseMods in Target.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="kt">var</span> <span class="n">num</span> <span class="p">=</span> <span class="n">_rand</span><span class="p">.</span><span class="nf">Next</span><span class="p">(</span><span class="m">100</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">offenseMods</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OffenseMods</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
            <span class="n">offenseMods</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="nf">GetEntityOffenseModifiers</span><span class="p">(</span><span class="n">originEntity</span><span class="p">));</span>
</code></pre></div></div>

<h2 id="unit-tests">Unit Tests</h2>
<p>The tests all pass still. I should figure out what tests I already need.</p>

<p>I don’t have any tests on OffenseMods at all yet, so there’s a good target. Also, since I’m relying on specifc behavior based on rngValue being readonly, I should have a test around that. It’s no good if I come back later and break an assumption that I’m relying on because I forgot.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">[</span><span class="n">TestMethod</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">DefaultOffenseModsHasValuesZero</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">offMod</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OffenseMods</span><span class="p">();</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">offMod</span><span class="p">.</span><span class="n">rngValue</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">offMod</span><span class="p">.</span><span class="n">totalAim</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">offMod</span><span class="p">.</span><span class="n">totalDamage</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">TestMethod</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">OffenseModsConstructorSetsOnlyRng</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">offMod</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OffenseMods</span><span class="p">(</span><span class="m">86</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="m">86</span><span class="p">,</span> <span class="n">offMod</span><span class="p">.</span><span class="n">rngValue</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">offMod</span><span class="p">.</span><span class="n">totalAim</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">offMod</span><span class="p">.</span><span class="n">totalDamage</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">TestMethod</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">CanNotSetRng</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">t</span> <span class="p">=</span> <span class="k">typeof</span><span class="p">(</span><span class="n">OffenseMods</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">rngValueFieldInfo</span> <span class="p">=</span> <span class="n">t</span><span class="p">.</span><span class="nf">GetField</span><span class="p">(</span><span class="s">"rngValue"</span><span class="p">,</span> <span class="n">BindingFlags</span><span class="p">.</span><span class="n">Public</span> <span class="p">|</span> <span class="n">BindingFlags</span><span class="p">.</span><span class="n">Instance</span><span class="p">);</span>

            <span class="n">Assert</span><span class="p">.</span><span class="nf">IsTrue</span><span class="p">(</span><span class="n">rngValueFieldInfo</span><span class="p">.</span><span class="n">IsInitOnly</span><span class="p">);</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>Also, there needs to be a test on OffenseModsExtensions to confirm the Add behavior around rngValue.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">[</span><span class="n">TestMethod</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">AddOffenseModsDoesNotChangeRngValue</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">off1</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OffenseMods</span><span class="p">(</span><span class="m">8</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">off2</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">OffenseMods</span><span class="p">(</span><span class="m">11</span><span class="p">);</span>
            <span class="n">off1</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">off2</span><span class="p">);</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="m">8</span><span class="p">,</span> <span class="n">off1</span><span class="p">.</span><span class="n">rngValue</span><span class="p">);</span>
        <span class="p">}</span>
</code></pre></div></div>

<h2 id="collision">Collision</h2>
<p>There isn’t really any logic in Collision yet, so I’m going to skip making tests for it for now. BUt, I think that means I’m ready to get back on track with my planned work items.</p>



  <small>tags: <em>code</em> - <em>model</em> - <em>offense</em></small>


<p>
  <div class="post-nav">
    <p>
      
      <a href="/roguelike/2021/11/25/collision-code.html">&#8672;&nbsp;Collision Code</a>
      
    </p>
    <p>
      
      <a href="/roguelike/2021/11/27/collision-work.html">Collision Work&nbsp;&#8674;</a>
      
    </p>
  </div>
</p>
        </section>

        <footer>
        
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

      </div>
    </div>

    
  </body>
</html>