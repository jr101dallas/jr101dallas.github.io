<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <title>Collision</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="https://assumeforsimplicity.com/feed.xml" title="Assume For Simplicity" />
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Collision | Assume For Simplicity</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Collision" />
<meta name="author" content="jr101dallas" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Following Through Moving on to the other open work items." />
<meta property="og:description" content="Following Through Moving on to the other open work items." />
<link rel="canonical" href="https://assumeforsimplicity.com/roguelike/2021/11/30/collision.html" />
<meta property="og:url" content="https://assumeforsimplicity.com/roguelike/2021/11/30/collision.html" />
<meta property="og:site_name" content="Assume For Simplicity" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-11-30T09:11:34+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Collision" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"jr101dallas"},"description":"Following Through Moving on to the other open work items.","url":"https://assumeforsimplicity.com/roguelike/2021/11/30/collision.html","@type":"BlogPosting","headline":"Collision","dateModified":"2021-11-30T09:11:34+00:00","datePublished":"2021-11-30T09:11:34+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://assumeforsimplicity.com/roguelike/2021/11/30/collision.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <div id="container">
      <div class="inner">
        <nav>
    
      <a href="/" >
        Home
      </a>
    
      <a href="/posts/" >
        Posts
      </a>
    
      <a href="/breadcrumbs/" >
        Breadcrumbs
      </a>
    
      <a href="/roguelike-tutorial/" >
        Roguelike
      </a>
    
      <a href="/about/" >
        About
      </a>
    
  </nav>
        <header>
          <h1>Collision</h1>
          <h2>Manage Time, Software, and Business, Easily  </h2>
        </header>
        <section id="downloads" class="clearfix">
          
	
        </section>
        <hr>
        <section id="main_content">
          <p class="view">30 November 2021 by jr101dallas</p>
<a href="/posts/">&#8672;&nbsp;Back to Posts</a>


<h1 id="following-through">Following Through</h1>
<p>Moving on to the other open work items.</p>

<ol>
  <li>add a default Armor instance to Entity(Factory)</li>
  <li>add Armor case to Entity tests</li>
  <li>create the extensions for adding DefenseMods</li>
  <li>add tests for the extensions</li>
  <li>set up use of the calculations in Collision</li>
  <li>verify and possibly add to current tests around the calculations and removal of the targeted Entity</li>
</ol>

<h2 id="entity-armor">Entity Armor</h2>
<p>Uh, well, when I wrote up the work item about adding the Armor to Entity(Factory), I must not have been thinking straight. Armor is an item. I’ll have to add it to Inventory. And, I’m betting I break some tests since I’m pretty sure I’m using defaults in a bunch of places.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">public</span> <span class="nf">Inventory</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">items</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="k">new</span> <span class="nf">Weapon</span><span class="p">());</span>
            <span class="n">items</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="k">new</span> <span class="nf">Armor</span><span class="p">());</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>The first try at adding the Armor broke 18 tests, because I was overwriting item 1 which used to be a Weapon with Armor. I probably need to add some methods for adding and removing inventory so that I don’t start doing that a lot. I might be able to use the same max and min as on the entities in Universe. Once I got the index right, only three tests are failing.</p>

<p>My first failure is here. And, that work to add and remove items would fix it. Right now I’m going to fix it manually and come back to the additional work.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">[</span><span class="n">TestMethod</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">GetItemModifiersSumsAllAim</span><span class="p">()</span>
        <span class="p">{</span>         
            <span class="kt">var</span> <span class="n">unv</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Universe</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">inv</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Inventory</span><span class="p">();</span>
            <span class="c1">//inv.items.Add(1, new Weapon()); items[1] default hardcoded to Weapon</span>
            <span class="n">inv</span><span class="p">.</span><span class="n">items</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="k">new</span> <span class="nf">Weapon</span><span class="p">());</span>
            <span class="n">inv</span><span class="p">.</span><span class="n">items</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="k">new</span> <span class="nf">Weapon</span><span class="p">());</span>

            <span class="kt">var</span> <span class="n">mods</span> <span class="p">=</span> <span class="n">unv</span><span class="p">.</span><span class="n">inf</span><span class="p">.</span><span class="n">target</span><span class="p">.</span><span class="nf">GetItemOffenseModifiers</span><span class="p">(</span><span class="n">inv</span><span class="p">);</span>

            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="m">15</span><span class="p">,</span> <span class="n">mods</span><span class="p">.</span><span class="n">totalAim</span><span class="p">,</span> <span class="s">"aimModsTotal not expected value."</span><span class="p">);</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>And, another failure is the same as the first, but the third one is this one, which used to expect one hardcoded item.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="p">[</span><span class="n">TestMethod</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">DefaultInventoryHasOneItem</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">inventory</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Inventory</span><span class="p">();</span>
            <span class="n">Assert</span><span class="p">.</span><span class="nf">AreEqual</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="n">inventory</span><span class="p">.</span><span class="n">items</span><span class="p">.</span><span class="n">Count</span><span class="p">,</span> <span class="s">"Expected two hardcoded Items in Inventory constructor."</span><span class="p">);</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>That probably means that I should also move my hardcoded items out of the default Inventory and either add a constructor that lets me add in items as I create an instance of Inventory or possibly start in on some Entity instance definitions like Warrior, an Entity that has specific Offense values, Defense values, and Inventory. Plenty of near term targets!</p>

<h2 id="entity-armor-test">Entity Armor Test</h2>
<p>The real puzzler here though is my work item for an Armor case in EntityTests. I’m not sure what I was thinking here. There aren’t really any Item or Inventory tests in there, like I’m sure you’re thinking. I’m not ready yet for the tests in CollisionTests because I have work still to do in the DefenseModsExtensions before I can write those tests the way I want. Skip it for now, come back to it later. I’ve got a net zero for the night anyway if I add my new work and cross off the top two items.</p>



  <small>tags: <em>code</em> - <em>collision</em> - <em>tests</em></small>


<p>
  <div class="post-nav">
    <p>
      
      <a href="/roguelike/2021/11/29/defense-mods.html">&#8672;&nbsp;Defense Mods</a>
      
    </p>
    <p>
      
      <a href="/detour/2021/12/01/advent-of-code.html">Advent of Code&nbsp;&#8674;</a>
      
    </p>
  </div>
</p>
        </section>

        <footer>
        
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

      </div>
    </div>

    
  </body>
</html>