<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <title>Refactoring</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="https://assumeforsimplicity.com/feed.xml" title="Assume For Simplicity" />
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Refactoring | Assume For Simplicity</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Refactoring" />
<meta name="author" content="jr101dallas" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Yuck In trying to keep to small work chunks, I wrote some pretty awful code." />
<meta property="og:description" content="The Yuck In trying to keep to small work chunks, I wrote some pretty awful code." />
<link rel="canonical" href="https://assumeforsimplicity.com/roguelike/2021/10/30/refactoring.html" />
<meta property="og:url" content="https://assumeforsimplicity.com/roguelike/2021/10/30/refactoring.html" />
<meta property="og:site_name" content="Assume For Simplicity" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-10-30T09:11:34+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Refactoring" />
<script type="application/ld+json">
{"description":"The Yuck In trying to keep to small work chunks, I wrote some pretty awful code.","headline":"Refactoring","dateModified":"2021-10-30T09:11:34+00:00","datePublished":"2021-10-30T09:11:34+00:00","url":"https://assumeforsimplicity.com/roguelike/2021/10/30/refactoring.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://assumeforsimplicity.com/roguelike/2021/10/30/refactoring.html"},"author":{"@type":"Person","name":"jr101dallas"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <div id="container">
      <div class="inner">
        <nav>
    
      <a href="/" >
        Home
      </a>
    
      <a href="/posts/" >
        Posts
      </a>
    
      <a href="/breadcrumbs/" >
        Breadcrumbs
      </a>
    
      <a href="/roguelike-tutorial/" >
        Roguelike
      </a>
    
      <a href="/about/" >
        About
      </a>
    
  </nav>
        <header>
          <h1>Refactoring</h1>
          <h2>Manage Time, Software, and Business, Easily  </h2>
        </header>
        <section id="downloads" class="clearfix">
          
	
        </section>
        <hr>
        <section id="main_content">
          <p class="view">30 October 2021 by jr101dallas</p>
<a href="/posts/">&#8672;&nbsp;Back to Posts</a>


<h1 id="the-yuck">The Yuck</h1>
<p>In trying to keep to small work chunks, I wrote some pretty awful code.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>            <span class="kt">var</span> <span class="n">target</span> <span class="p">=</span> <span class="p">(</span><span class="n">Target</span><span class="p">)</span><span class="n">unv</span><span class="p">.</span><span class="n">systems</span><span class="p">[</span><span class="k">nameof</span><span class="p">(</span><span class="n">Target</span><span class="p">)];</span>
            <span class="n">target</span><span class="p">.</span><span class="nf">TargetEntity</span><span class="p">(</span><span class="n">unv</span><span class="p">,</span> <span class="n">originEntity</span><span class="p">,</span> <span class="n">targetEntity</span><span class="p">);</span>
</code></pre></div></div>

<p>My thought process was:</p>
<ol>
  <li>keep a Dictionary of ISystem on Universe</li>
  <li>load them when Universe instance is created</li>
  <li>do stuff with them with great ease</li>
</ol>

<p>I suppose that maybe I’m just having to do some acrobatics in the test, and not using them like they’ll get used in a Universe instance, but I’m also feeling like I’m setting myself up to have to call everything with <code class="language-plaintext highlighter-rouge">unv.Something</code> to get anything done. It’s probably time for more planning.</p>

<h2 id="not-a-dictionary-again">Not a Dictionary, Again</h2>
<p>First off, I’m thinking I don’t need Dictionary, or even a Collection at all, for my System instances. Even if I end up with thirty, I’m probably not ever going to have duplicates. Component instances, I could have duplicates, maybe I have two Locomotion Component instances, one for walking and one for flight. And, I’m likely to add and remove components from an Entity as items are picked up, dropped, and equipped. So, that still feels like a Dictionary because I’ll still want to access them by name or Enum value, flight for the Locomotion Component that fills that use, equippedWeapon for the Weapon Component that the Entity has in its hand and ready. If I build my own object, I can have the different Types rather than using ISystem as well. I’ll eventually need ISystem still, because I’ll still eventually move at least some systems into microservices and those will all run things on the interface, but inside Universe I’ll want reference to be the actual Types so I can have easy access to the unique things about each System.</p>

<h2 id="dictionary">Dictionary</h2>
<p>Why my go-to is Dictionary, I don’t know, but it does make an easy start to the code to get something in place quickly. But, at least I’m ready to abandon it when it doesn’t make sense.</p>

<p>What do I need in this object I’m designing? This seems easy, sensibly named objects for each System, already the correct Type that can just have its own methods called.</p>

<p>Or what do I need in my Target class? It feels pretty obvious to me that there needs to be a reference to the Universe that the System is operating in. That would cut out having to tell the System every time where the Entity being operated on, or list of them, can be found.</p>

<p>Or, what do I need in my ISystem interface? Maybe this is where the reference to the Universe belongs.</p>



  <small>tags: <em>code</em> - <em>test</em> - <em>refactoring</em></small>


<p>
  <div class="post-nav">
    <p>
      
      <a href="/roguelike/2021/10/29/systems.html">&#8672;&nbsp;Systems</a>
      
    </p>
    <p>
      
      <a href="/roguelike/2021/10/31/more-refactoring.html">More Refactoring&nbsp;&#8674;</a>
      
    </p>
  </div>
</p>
        </section>

        <footer>
        
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

      </div>
    </div>

    
  </body>
</html>