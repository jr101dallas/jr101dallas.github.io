<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <title>Entity Factory (Code)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="/assets/css/style.css?v=2caa0aad044a3b83b4d652639794266fe94766b9">
    <link rel="stylesheet" type="text/css" href="/assets/css/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link type="application/atom+xml" rel="alternate" href="https://assumeforsimplicity.com/feed.xml" title="Assume For Simplicity" />
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Entity Factory (Code) | Assume For Simplicity</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Entity Factory (Code)" />
<meta name="author" content="jr101dallas" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Tieing In I’ve created the Universe. That’s never going to get old. Some of the things I get to say doing a game project are just too much fun. Last experiment with a game I had so much fun when I hit the point of implementing Death. This time it’s still fun as I reimplement Death, or implement Death again!" />
<meta property="og:description" content="Tieing In I’ve created the Universe. That’s never going to get old. Some of the things I get to say doing a game project are just too much fun. Last experiment with a game I had so much fun when I hit the point of implementing Death. This time it’s still fun as I reimplement Death, or implement Death again!" />
<link rel="canonical" href="https://assumeforsimplicity.com/roguelike/2021/10/26/entity-factory.html" />
<meta property="og:url" content="https://assumeforsimplicity.com/roguelike/2021/10/26/entity-factory.html" />
<meta property="og:site_name" content="Assume For Simplicity" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-10-26T09:11:34+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Entity Factory (Code)" />
<script type="application/ld+json">
{"description":"Tieing In I’ve created the Universe. That’s never going to get old. Some of the things I get to say doing a game project are just too much fun. Last experiment with a game I had so much fun when I hit the point of implementing Death. This time it’s still fun as I reimplement Death, or implement Death again!","headline":"Entity Factory (Code)","dateModified":"2021-10-26T09:11:34+00:00","datePublished":"2021-10-26T09:11:34+00:00","url":"https://assumeforsimplicity.com/roguelike/2021/10/26/entity-factory.html","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://assumeforsimplicity.com/roguelike/2021/10/26/entity-factory.html"},"author":{"@type":"Person","name":"jr101dallas"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <div id="container">
      <div class="inner">
        <nav>
    
      <a href="/" >
        Home
      </a>
    
      <a href="/posts/" >
        Posts
      </a>
    
      <a href="/breadcrumbs/" >
        Breadcrumbs
      </a>
    
      <a href="/roguelike-tutorial/" >
        Roguelike
      </a>
    
      <a href="/about/" >
        About
      </a>
    
  </nav>
        <header>
          <h1>Entity Factory (Code)</h1>
          <h2>Manage Time, Software, and Business, Easily  </h2>
        </header>
        <section id="downloads" class="clearfix">
          
	
        </section>
        <hr>
        <section id="main_content">
          <p class="view">26 October 2021 by jr101dallas</p>
<a href="/posts/">&#8672;&nbsp;Back to Posts</a>


<h1 id="tieing-in">Tieing In</h1>
<p>I’ve created the Universe. That’s never going to get old. Some of the things I get to say doing a game project are just too much fun. Last experiment with a game I had so much fun when I hit the point of implementing Death. This time it’s still fun as I reimplement Death, or implement Death again!</p>

<p>Universe is there but it’s not hooked up. I’ll need to instantiate it on game startup so that the Entity Factory has a place to put all the instances that we’ll eventually be <a href="https://www.youtube.com/watch?v=dWBmaKk32fE">scanning</a> for. Well, hopfully primarily we’ll just be doing index seeks.</p>

<h2 id="instantiating-universe">Instantiating Universe</h2>
<p>I’m smiling, I hope you are too! I haven’t really spent any time in physics.cs where Program and Main are. So let’s fix that up a bit first.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">gameName</span> <span class="p">=</span> <span class="nf">GetGameDisplayName</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">displayText</span> <span class="p">=</span> <span class="s">$"Hello World! Welcome to </span><span class="p">{</span><span class="n">gameName</span><span class="p">}</span><span class="s">"</span><span class="p">;</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">displayText</span><span class="p">);</span>

            <span class="kt">var</span> <span class="n">unv</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Universe</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">const</span> <span class="kt">string</span> <span class="n">GameTitle</span> <span class="p">=</span> <span class="s">"Utopia"</span><span class="p">;</span>

        <span class="k">public</span> <span class="k">static</span> <span class="kt">string</span> <span class="nf">GetGameDisplayName</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="s">$"</span><span class="p">{</span><span class="n">GameTitle</span><span class="p">}</span><span class="s">: The Tutorial"</span><span class="p">;</span>
        <span class="p">}</span>
</code></pre></div></div>

<p>I’ve expanded on the <code class="language-plaintext highlighter-rouge">Hello World!</code> and that required the <code class="language-plaintext highlighter-rouge">const</code> and <code class="language-plaintext highlighter-rouge">static</code> keywords. Now we should get a nice little tag line in the console when we run our program. I probably need to be a little careful here because I really am going to end up breaking the logic out into a library eventually with the console application just picking it up and using it. There will almost certainly be some renaming involved since when I started out I had much less idea of where I was going.</p>

<p>I’ve also instantiated Universe.</p>

<h2 id="entity-factory">Entity Factory</h2>
<p>Now I have a place for entities to live after EntityFactory spits them out. Getting an instance alone, in our case, wasn’t good enough because we need to know when the instance should no longer exist and eventually when we tie in display when it should no longer be rendered or referenced.</p>

<p>Speaking of EntityFactory, it’s dead simple right now while there aren’t any Components on Entity to differentiate between them. Universe has all the information, so calling <code class="language-plaintext highlighter-rouge">GetEntity()</code> on Universe makes sense and EntityFactory can just handle the Entity type logic.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">public</span> <span class="k">class</span> <span class="nc">EntityFactory</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Entity</span> <span class="nf">GetEntity</span><span class="p">(</span><span class="kt">int</span> <span class="n">lastEntityId</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">Entity</span><span class="p">(){</span>
                <span class="n">Id</span> <span class="p">=</span> <span class="p">++</span><span class="n">lastEntityId</span>
            <span class="p">};</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Universe</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">SortedList</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">IEntity</span><span class="p">&gt;</span> <span class="n">entities</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SortedList</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">IEntity</span><span class="p">&gt;();</span>

        <span class="k">public</span> <span class="kt">int</span> <span class="nf">LastEntityId</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">entities</span><span class="p">.</span><span class="n">Count</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span> <span class="k">return</span> <span class="m">0</span><span class="p">;</span>

            <span class="k">return</span> <span class="n">entities</span><span class="p">.</span><span class="nf">Max</span><span class="p">().</span><span class="n">Key</span><span class="p">;</span>
        <span class="p">}</span>        

        <span class="k">public</span> <span class="n">Entity</span> <span class="nf">GetEntity</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">ef</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">EntityFactory</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">entity</span> <span class="p">=</span> <span class="n">ef</span><span class="p">.</span><span class="nf">GetEntity</span><span class="p">(</span><span class="nf">LastEntityId</span><span class="p">());</span>
            <span class="n">entities</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">entity</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span> <span class="n">entity</span><span class="p">);</span>
            <span class="k">return</span> <span class="n">entity</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</code></pre></div></div>



  <small>tags: <em>code</em> - <em>entity</em> - <em>factory</em></small>


<p>
  <div class="post-nav">
    <p>
      
      <a href="/roguelike/2021/10/25/create-universe.html">&#8672;&nbsp;Create Universe</a>
      
    </p>
    <p>
      
      <a href="/roguelike/2021/10/27/sortedlist=extensions.html">SortedList Extensions&nbsp;&#8674;</a>
      
    </p>
  </div>
</p>
        </section>

        <footer>
        
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.
        </footer>

      </div>
    </div>

    
  </body>
</html>